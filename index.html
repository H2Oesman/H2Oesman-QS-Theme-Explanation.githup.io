<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QS-Theme-Explanation Indonesian and English</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      background-color: #f5f9fc;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #333;
      padding: 12px;
      font-size: 15px;
      line-height: 1.5;
    }
    .header {
      font-size: 16px;
      text-align: center;
      margin-bottom: 15px;
      padding: 12px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    .header div {
      margin: 4px 0;
    }
    .bismillah {
      margin-bottom: 8px;
    }
    .search-container {
      text-align: center;
      margin-bottom: 15px;
      position: sticky;
      top: 0;
      background-color: #f5f9fc;
      padding: 12px 0 8px 0;
      z-index: 10;
    }
    .search-box {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }
    input[type="text"] {
      width: 90%;
      max-width: 500px;
      padding: 10px 12px;
      font-size: 15px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background-color: #fff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }
    .search-info {
      font-size: 13px;
      color: #666;
      margin-top: 5px;
    }
    .instruction {
      text-align: center;
      font-size: 14px;
      margin: 8px 0 0 0;
      font-style: italic;
      color: #555;
      padding: 8px 0;
      background-color: #f5f9fc;
      border-radius: 6px;
      position: sticky;
      top: 70px;
      z-index: 9;
    }
    .names-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin: 0 auto;
      max-width: 1200px;
    }
    .name-box {
      background-color: #fff;
      padding: 10px 6px;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      transition: transform 0.2s, box-shadow 0.2s, background-color 0.3s;
      text-align: center;
      min-height: 90px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    .name-box.playing-audio {
      background-color: #e8f6f3;
      box-shadow: 0 4px 12px rgba(46, 204, 113, 0.2);
    }
    .name-box.loading-audio {
      background-color: #fff9e6;
      box-shadow: 0 4px 12px rgba(241, 196, 15, 0.2);
    }
    .name-box.recently-viewed {
      background-color: #e8f6f3 !important;
      box-shadow: 0 4px 12px rgba(46, 204, 113, 0.4) !important;
      border: 2px solid #2ecc71 !important;
      animation: pulse-highlight 2s ease-in-out infinite;
      position: relative;
    }
    .name-box.recently-viewed::before {
      content: "Last Viewed";
      position: absolute;
      top: 4px;
      left: 4px;
      background-color: #2ecc71;
      color: white;
      font-size: 9px;
      padding: 2px 6px;
      border-radius: 10px;
      font-weight: bold;
      z-index: 1;
    }
    .name-box:nth-child(even) {
      background-color: #f8f9fa;
    }
    .name-box:nth-child(even).playing-audio {
      background-color: #d5f4f0;
    }
    .name-box:nth-child(even).loading-audio {
      background-color: #fff4cc;
    }
    .name-box:nth-child(even).recently-viewed {
      background-color: #d5f4f0 !important;
      border: 2px solid #2ecc71 !important;
    }
    .name-box:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.12);
    }
    .name-box a {
      text-decoration: none;
      color: #1a5276;
      display: block;
      font-size: 13px;
      line-height: 1.3;
      width: 100%;
      pointer-events: none;
    }
    .name-box a:hover {
      color: #2980b9;
    }
    .arabic {
      font-family: 'Amiri', 'Scheherazade New', serif;
      font-size: 18px;
      direction: rtl;
      margin-bottom: 4px;
      display: block;
    }
    .transliteration {
      font-size: 13px;
      color: #2c3e50;
      margin-bottom: 4px;
      display: block;
    }
    .translation {
      font-size: 12px;
      color: #34495e;
      margin-bottom: 4px;
      display: block;
      font-weight: 500;
    }
    .meta-info {
      font-size: 11px;
      color: #666;
      display: block;
      margin-top: 3px;
    }
    .audio-indicator {
      position: absolute;
      top: 4px;
      right: 4px;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background-color: #2ecc71;
      opacity: 0;
      transition: opacity 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .audio-indicator.playing {
      opacity: 1;
      animation: pulse 1.5s infinite;
    }
    .audio-indicator.loading {
      opacity: 1;
      background-color: #f39c12;
      animation: spin 1s infinite linear;
    }
    .audio-indicator.loading::after {
      content: "";
      width: 8px;
      height: 8px;
      border: 2px solid transparent;
      border-top-color: white;
      border-radius: 50%;
    }
    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.2); opacity: 0.7; }
      100% { transform: scale(1); opacity: 1; }
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    @keyframes pulse-highlight {
      0% { transform: scale(1); box-shadow: 0 4px 12px rgba(46, 204, 113, 0.4); }
      50% { transform: scale(1.02); box-shadow: 0 6px 16px rgba(46, 204, 113, 0.6); }
      100% { transform: scale(1); box-shadow: 0 4px 12px rgba(46, 204, 113, 0.4); }
    }
    .audio-hint {
      color: #2ecc71;
      font-size: 11px;
      font-weight: bold;
      margin-top: 3px;
      display: block;
    }
    .audio-controls {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.15);
      padding: 10px;
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 200px;
      display: none;
    }
    .audio-controls.show {
      display: flex;
      animation: slideUp 0.3s ease;
    }
    @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .audio-controls button {
      background: #3498db;
      border: none;
      color: white;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
    }
    .audio-controls button:hover {
      background: #2980b9;
    }
    .audio-info {
      font-size: 12px;
      color: #2c3e50;
      flex-grow: 1;
      text-align: center;
    }
    .audio-info .surah-name {
      font-weight: bold;
      color: #1a5276;
    }
    .audio-info .reciter {
      font-size: 11px;
      color: #7f8c8d;
      margin-top: 2px;
    }
    .reference {
      text-align: center;
      margin-top: 25px;
      font-size: 13px;
    }
    .intro-link {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 12px 0;
      padding: 0 10px;
    }
    .intro-link a {
      color: #2980b9;
      text-decoration: none;
      font-size: 14px;
      padding: 8px 15px;
      background-color: #e8f4fc;
      border-radius: 20px;
      display: inline-block;
      transition: background-color 0.2s;
    }
    .intro-link a:hover {
      background-color: #d4e9ff;
    }
    .language-toggle {
      position: fixed;
      top: 12px;
      right: 12px;
      background: #3498db;
      color: white;
      padding: 8px 14px;
      border-radius: 20px;
      cursor: pointer;
      z-index: 100;
      font-weight: bold;
      font-size: 13px;
      border: none;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    .hidden {
      display: none;
    }
    .no-results {
      grid-column: 1 / -1;
      text-align: center;
      padding: 20px;
      font-style: italic;
      color: #666;
    }
    @media screen and (max-width: 768px) {
      body {
        padding: 10px;
        font-size: 14px;
      }
      .name-box {
        padding: 8px 4px;
        min-height: 90px;
      }
      .name-box a {
        font-size: 12px;
      }
      .arabic {
        font-size: 16px;
      }
      .transliteration {
        font-size: 12px;
      }
      .translation {
        font-size: 11px;
      }
      .meta-info {
        font-size: 10px;
      }
      .language-toggle {
        padding: 6px 12px;
        font-size: 12px;
      }
      .header {
        font-size: 15px;
        padding: 10px;
      }
      .instruction {
        font-size: 13px;
        top: 65px;
      }
      .audio-controls {
        bottom: 10px;
        right: 10px;
        left: 10px;
        min-width: auto;
      }
      .audio-hint {
        font-size: 10px;
      }
      .name-box.recently-viewed::before {
        font-size: 8px;
        padding: 1px 4px;
      }
    }
    @media screen and (max-width: 480px) {
      .name-box a {
        font-size: 11px;
        line-height: 1.2;
      }
      .arabic {
        font-size: 14px;
      }
      .transliteration {
        font-size: 11px;
      }
      .translation {
        font-size: 10px;
      }
      .meta-info {
        font-size: 9px;
      }
      .names-container {
        gap: 8px;
      }
      .name-box {
        min-height: 85px;
        padding: 6px 3px;
      }
      .instruction {
        font-size: 12px;
        top: 60px;
      }
      .audio-hint {
        font-size: 9px;
      }
      .name-box.recently-viewed::before {
        font-size: 7px;
        top: 2px;
        left: 2px;
      }
    }
    @media screen and (max-width: 360px) {
      .name-box a {
        font-size: 10px;
      }
      .arabic {
        font-size: 13px;
      }
      .transliteration {
        font-size: 10px;
      }
      .translation {
        font-size: 9px;
      }
      .meta-info {
        font-size: 8px;
      }
      .name-box {
        min-height: 80px;
      }
      .instruction {
        font-size: 11px;
        top: 55px;
      }
      .audio-hint {
        font-size: 8px;
      }
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Amiri&family=Scheherazade+New&display=swap" rel="stylesheet">
</head>
<body>
  <button class="language-toggle" id="languageToggle">Switch to English</button>
  <div class="audio-controls" id="audioControls">
    <button id="playPauseBtn">▶</button>
    <div class="audio-info">
      <div class="surah-name" id="currentSurahName"></div>
      <div class="reciter">Mishaari Raashid Al-3afaasee</div>
    </div>
    <button id="stopBtn">⏹</button>
  </div>

  <div id="english-content" class="hidden">
    <div class="header">
      <div style="font-family: 'Amiri', serif; direction: rtl; font-size: 20px;">﷽</div>
      <div class="bismillah"><strong>Bismillāhir-Raḥmānir-Raḥīm</strong> — In the name of Allah, the Most Gracious, the Most Merciful</div>
    </div>
    <div class="search-container">
      <div class="search-box">
        <input type="text" id="searchInput" onkeyup="searchNames()" placeholder="Search by surah number, Arabic, or English name...">
      </div>
      <div class="search-info">Search by number (1-114), Arabic surah name, transliteration, or English meaning</div>
      <div class="instruction">Single click: Go to tafsir page (stops audio if playing). Double-click: Listen to recitation.</div>
    </div>
    <div class="intro-link">
      <a href="juz_summary.html">Juz Summary</a>
      <a href="introduction.html">Introduction</a>
    </div>
    <div class="names-container" id="englishNamesContainer">
      <!-- Names will be populated by JavaScript -->
    </div>
    <div class="reference">
      <a href="ref.html">Reference</a>
    </div>
  </div>

  <div id="indonesian-content">
    <div class="header">
      <div style="font-family: 'Amiri', serif; direction: rtl; font-size: 20px;">﷽</div>
      <div class="bismillah"><strong>Bismillāhir-Raḥmānir-Raḥīm</strong></div>
    </div>
    <div class="search-container">
      <div class="search-box">
        <input type="text" id="searchInputIndo" onkeyup="searchNamesIndo()" placeholder="Cari berdasarkan nomor surah, Arab, atau nama surah Indonesia...">
      </div>
      <div class="search-info">Cari berdasarkan nomor (1-114), nama surah Arab, transliterasi, atau arti Indonesia</div>
      <div class="instruction">Klik sekali: Pergi ke tafsir (audio berhenti jika sedang diputar). Dua kali (double-click): Dengarkan tilawah.</div>
    </div>
    <div class="intro-link">
      <a href="juz_summary.html">Ringkasan Juz</a>
      <a href="introduction.html">Intro</a>
    </div>
    <div class="names-container" id="indonesianNamesContainer">
      <!-- Names will be populated by JavaScript -->
    </div>
    <div class="reference">
      <a href="ref.html">Referensi</a>
    </div>
  </div>

  <footer>
    <p>&copy; (2025 AD) 1447 AH Curated and Maintained by Hermansjah. All rights reserved.</p>
    <p style="font-size: 11px; color: #95a5a6; margin-top: 5px;">Audio by Mishaari Raashid Al-3afaasee from quranicaudio.com</p>
  </footer>

  <script>
    let audioPlayer = new Audio();
    let currentPlayingBox = null;
    let currentSurahNumber = null;

    const namesData = [
      { number: 1, arabic: "ٱلْفَاتِحَة", transliteration: "Al-Fātiḥah", english: "The Opening", indonesian: "Pembukaan", juz: 1, page: 1 },
      { number: 2, arabic: "ٱلْبَقَرَة", transliteration: "Al-Baqarah", english: "The Cow", indonesian: "Sapi Betina", juz: [1,2,3], page: 2 },
      { number: 3, arabic: "آلِ عِمْرَان", transliteration: "Āl ʿImrān", english: "Family of Imran", indonesian: "Keluarga Imran", juz: [3,4], page: 50 },
      { number: 4, arabic: "ٱلنِّسَاء", transliteration: "An-Nisāʾ", english: "The Women", indonesian: "Wanita", juz: [4,5,6], page: 77 },
      { number: 5, arabic: "ٱلْمَائِدَة", transliteration: "Al-Mā'idah", english: "The Table Spread", indonesian: "Hidangan", juz: [6,7], page: 106 },
      { number: 6, arabic: "ٱلْأَنْعَام", transliteration: "Al-Anʿām", english: "The Cattle", indonesian: "Hewan Ternak", juz: [7,8], page: 128 },
      { number: 7, arabic: "ٱلْأَعْرَاف", transliteration: "Al-Aʿrāf", english: "The Heights", indonesian: "Tempat Tertinggi", juz: [8,9], page: 151 },
      { number: 8, arabic: "ٱلْأَنْفَال", transliteration: "Al-Anfāl", english: "The Spoils of War", indonesian: "Harta Rampasan", juz: 9, page: 177 },
      { number: 9, arabic: "ٱلتَّوْبَة", transliteration: "At-Tawbah", english: "Repentance", indonesian: "Pengampunan", juz: [9,10], page: 187 },
      { number: 10, arabic: "يُونُس", transliteration: "Yūnus", english: "Jonah", indonesian: "Yunus", juz: 11, page: 208 },
      { number: 11, arabic: "هُود", transliteration: "Hūd", english: "Hud", indonesian: "Hud", juz: 11, page: 221 },
      { number: 12, arabic: "يُوسُف", transliteration: "Yūsuf", english: "Joseph", indonesian: "Yusuf", juz: 12, page: 235 },
      { number: 13, arabic: "ٱلرَّعْد", transliteration: "Ar-Raʿd", english: "The Thunder", indonesian: "Guruh", juz: 13, page: 249 },
      { number: 14, arabic: "إِبْرَاهِيم", transliteration: "Ibrāhīm", english: "Abraham", indonesian: "Ibrahim", juz: 13, page: 255 },
      { number: 15, arabic: "ٱلْحِجْر", transliteration: "Al-Ḥijr", english: "The Rocky Tract", indonesian: "Daerah Berbatu", juz: 14, page: 262 },
      { number: 16, arabic: "ٱلنَّحْل", transliteration: "An-Naḥl", english: "The Bee", indonesian: "Lebah", juz: 14, page: 267 },
      { number: 17, arabic: "ٱلْإِسْرَاء", transliteration: "Al-Isrā'", english: "The Night Journey", indonesian: "Perjalanan Malam", juz: 15, page: 282 },
      { number: 18, arabic: "ٱلْكَهْف", transliteration: "Al-Kahf", english: "The Cave", indonesian: "Gua", juz: 15, page: 293 },
      { number: 19, arabic: "مَرْيَم", transliteration: "Maryam", english: "Mary", indonesian: "Maryam", juz: 16, page: 305 },
      { number: 20, arabic: "طه", transliteration: "Ṭā Hā", english: "Ta-Ha", indonesian: "Tha Ha", juz: 16, page: 312 },
      { number: 21, arabic: "ٱلْأَنْبِيَاء", transliteration: "Al-Anbiyā'", english: "The Prophets", indonesian: "Para Nabi", juz: 17, page: 322 },
      { number: 22, arabic: "ٱلْحَجّ", transliteration: "Al-Ḥajj", english: "The Pilgrimage", indonesian: "Haji", juz: 17, page: 332 },
      { number: 23, arabic: "ٱلْمُؤْمِنُونَ", transliteration: "Al-Mu'minūn", english: "The Believers", indonesian: "Orang-Orang Beriman", juz: 18, page: 342 },
      { number: 24, arabic: "ٱلنُّور", transliteration: "An-Nūr", english: "The Light", indonesian: "Cahaya", juz: 18, page: 350 },
      { number: 25, arabic: "ٱلْفُرْقَان", transliteration: "Al-Furqān", english: "The Criterion", indonesian: "Pembeda", juz: 18, page: 359 },
      { number: 26, arabic: "ٱلشُّعَرَاء", transliteration: "Ash-Shuʿarā'", english: "The Poets", indonesian: "Penyair", juz: 19, page: 367 },
      { number: 27, arabic: "ٱلنَّمْل", transliteration: "An-Naml", english: "The Ant", indonesian: "Semut", juz: 19, page: 377 },
      { number: 28, arabic: "ٱلْقَصَص", transliteration: "Al-Qaṣaṣ", english: "The Stories", indonesian: "Kisah-Kisah", juz: 20, page: 385 },
      { number: 29, arabic: "ٱلْعَنْكَبُوت", transliteration: "Al-ʿAnkabūt", english: "The Spider", indonesian: "Laba-Laba", juz: 20, page: 396 },
      { number: 30, arabic: "ٱلرُّوم", transliteration: "Ar-Rūm", english: "The Romans", indonesian: "Bangsa Romawi", juz: 21, page: 404 },
      { number: 31, arabic: "لُقْمَان", transliteration: "Luqmān", english: "Luqman", indonesian: "Luqman", juz: 21, page: 411 },
      { number: 32, arabic: "ٱلسَّجْدَة", transliteration: "As-Sajdah", english: "The Prostration", indonesian: "Sujud", juz: 21, page: 415 },
      { number: 33, arabic: "ٱلْأَحْزَاب", transliteration: "Al-Aḥzāb", english: "The Confederates", indonesian: "Golongan yang Bersekutu", juz: 21, page: 418 },
      { number: 34, arabic: "سَبَأ", transliteration: "Saba'", english: "Sheba", indonesian: "Saba'", juz: 22, page: 428 },
      { number: 35, arabic: "فَاطِر", transliteration: "Fāṭir", english: "The Originator", indonesian: "Pencipta", juz: 22, page: 434 },
      { number: 36, arabic: "يس", transliteration: "Yā Sīn", english: "Ya-Sin", indonesian: "Yasin", juz: 22, page: 440 },
      { number: 37, arabic: "ٱلصَّافَّات", transliteration: "As-Ṣāffāt", english: "Those Who Set the Ranks", indonesian: "Barisan", juz: 23, page: 446 },
      { number: 38, arabic: "ص", transliteration: "Ṣād", english: "Sad", indonesian: "Shad", juz: 23, page: 453 },
      { number: 39, arabic: "ٱلزُّمَر", transliteration: "Az-Zumar", english: "The Groups", indonesian: "Rombongan", juz: 23, page: 458 },
      { number: 40, arabic: "غَافِر", transliteration: "Ghāfir", english: "The Forgiver", indonesian: "Maha Pengampun", juz: 24, page: 467 },
      { number: 41, arabic: "فُصِّلَتْ", transliteration: "Fuṣṣilat", english: "Explained in Detail", indonesian: "Dijelaskan", juz: 24, page: 477 },
      { number: 42, arabic: "ٱلشُّورَىٰ", transliteration: "Ash-Shūrā", english: "The Consultation", indonesian: "Musyawarah", juz: 25, page: 483 },
      { number: 43, arabic: "ٱلزُّخْرُف", transliteration: "Az-Zukhruf", english: "The Ornaments of Gold", indonesian: "Perhiasan", juz: 25, page: 489 },
      { number: 44, arabic: "ٱلدُّخَان", transliteration: "Ad-Dukhān", english: "The Smoke", indonesian: "Kabut", juz: 25, page: 496 },
      { number: 45, arabic: "ٱلْجَاثِيَة", transliteration: "Al-Jāthiyah", english: "The Kneeling", indonesian: "Berlutut", juz: 25, page: 499 },
      { number: 46, arabic: "ٱلْأَحْقَاف", transliteration: "Al-Aḥqāf", english: "The Wind-Curved Sandhills", indonesian: "Bukit Pasir", juz: 26, page: 502 },
      { number: 47, arabic: "مُحَمَّد", transliteration: "Muḥammad", english: "Muhammad", indonesian: "Muhammad", juz: 26, page: 507 },
      { number: 48, arabic: "ٱلْفَتْح", transliteration: "Al-Fatḥ", english: "The Victory", indonesian: "Kemenangan", juz: 26, page: 511 },
      { number: 49, arabic: "ٱلْحُجُرَات", transliteration: "Al-Ḥujurāt", english: "The Rooms", indonesian: "Kamar-Kamar", juz: 26, page: 515 },
      { number: 50, arabic: "ق", transliteration: "Qāf", english: "Qaf", indonesian: "Qaf", juz: 26, page: 518 },
      { number: 51, arabic: "ٱلذَّارِيَات", transliteration: "Adh-Dhāriyāt", english: "The Winnowing Winds", indonesian: "Angin yang Menerbangkan", juz: 26, page: 520 },
      { number: 52, arabic: "ٱلطُّور", transliteration: "Aṭ-Ṭūr", english: "The Mount", indonesian: "Gunung", juz: 27, page: 523 },
      { number: 53, arabic: "ٱلنَّجْم", transliteration: "An-Najm", english: "The Star", indonesian: "Bintang", juz: 27, page: 526 },
      { number: 54, arabic: "ٱلْقَمَر", transliteration: "Al-Qamar", english: "The Moon", indonesian: "Bulan", juz: 27, page: 528 },
      { number: 55, arabic: "ٱلرَّحْمَٰن", transliteration: "Ar-Raḥmān", english: "The Most Merciful", indonesian: "Maha Pengasih", juz: 27, page: 531 },
      { number: 56, arabic: "ٱلْوَاقِعَة", transliteration: "Al-Wāqiʿah", english: "The Inevitable", indonesian: "Hari Kiamat", juz: 27, page: 534 },
      { number: 57, arabic: "ٱلْحَدِيد", transliteration: "Al-Ḥadīd", english: "The Iron", indonesian: "Besi", juz: 27, page: 537 },
      { number: 58, arabic: "ٱلْمُجَادِلَة", transliteration: "Al-Mujādilah", english: "The Pleading Woman", indonesian: "Wanita yang Menggugat", juz: 28, page: 542 },
      { number: 59, arabic: "ٱلْحَشْر", transliteration: "Al-Ḥashr", english: "The Exile", indonesian: "Pengusiran", juz: 28, page: 545 },
      { number: 60, arabic: "ٱلْمُمْتَحَنَة", transliteration: "Al-Mumtaḥanah", english: "The Examined Woman", indonesian: "Wanita yang Diuji", juz: 28, page: 549 },
      { number: 61, arabic: "ٱلصَّف", transliteration: "Aṣ-Ṣaff", english: "The Ranks", indonesian: "Barisan", juz: 28, page: 551 },
      { number: 62, arabic: "ٱلْجُمُعَة", transliteration: "Al-Jumuʿah", english: "The Friday", indonesian: "Jumat", juz: 28, page: 553 },
      { number: 63, arabic: "ٱلْمُنَافِقُونَ", transliteration: "Al-Munāfiqūn", english: "The Hypocrites", indonesian: "Orang-Orang Munafik", juz: 28, page: 554 },
      { number: 64, arabic: "ٱلتَّغَابُن", transliteration: "At-Taghābun", english: "Mutual Disillusion", indonesian: "Pengungkapan Kesalahan", juz: 28, page: 556 },
      { number: 65, arabic: "ٱلطَّلَاق", transliteration: "Aṭ-Ṭalāq", english: "Divorce", indonesian: "Talak", juz: 28, page: 558 },
      { number: 66, arabic: "ٱلتَّحْرِيم", transliteration: "At-Taḥrīm", english: "The Prohibition", indonesian: "Mengharamkan", juz: 28, page: 560 },
      { number: 67, arabic: "ٱلْمُلْك", transliteration: "Al-Mulk", english: "The Sovereignty", indonesian: "Kerajaan", juz: 29, page: 562 },
      { number: 68, arabic: "ٱلْقَلَم", transliteration: "Al-Qalam", english: "The Pen", indonesian: "Pena", juz: 29, page: 564 },
      { number: 69, arabic: "ٱلْحَاقَّة", transliteration: "Al-Ḥāqqah", english: "The Reality", indonesian: "Hari Kiamat", juz: 29, page: 566 },
      { number: 70, arabic: "ٱلْمَعَارِج", transliteration: "Al-Maʿārij", english: "The Ascending Stairways", indonesian: "Tempat Naik", juz: 29, page: 568 },
      { number: 71, arabic: "نُوح", transliteration: "Nūḥ", english: "Noah", indonesian: "Nuh", juz: 29, page: 570 },
      { number: 72, arabic: "ٱلْجِنّ", transliteration: "Al-Jinn", english: "The Jinn", indonesian: "Jin", juz: 29, page: 572 },
      { number: 73, arabic: "ٱلْمُزَّمِّل", transliteration: "Al-Muzzammil", english: "The Enshrouded One", indonesian: "Orang yang Berselimut", juz: 29, page: 574 },
      { number: 74, arabic: "ٱلْمُدَّثِّر", transliteration: "Al-Muddaththir", english: "The Cloaked One", indonesian: "Orang yang Berkemul", juz: 29, page: 575 },
      { number: 75, arabic: "ٱلْقِيَامَة", transliteration: "Al-Qiyāmah", english: "The Resurrection", indonesian: "Kebangkitan", juz: 29, page: 577 },
      { number: 76, arabic: "ٱلْإِنْسَان", transliteration: "Al-Insān", english: "The Human", indonesian: "Manusia", juz: 29, page: 578 },
      { number: 77, arabic: "ٱلْمُرْسَلَات", transliteration: "Al-Mursalāt", english: "The Emissaries", indonesian: "Malaikat yang Diutus", juz: 29, page: 580 },
      { number: 78, arabic: "ٱلنَّبَأ", transliteration: "An-Naba'", english: "The Announcement", indonesian: "Berita Besar", juz: 30, page: 582 },
      { number: 79, arabic: "ٱلنَّازِعَات", transliteration: "An-Nāziʿāt", english: "Those Who Pull Out", indonesian: "Malaikat yang Mencabut", juz: 30, page: 583 },
      { number: 80, arabic: "عَبَسَ", transliteration: "ʿAbasa", english: "He Frowned", indonesian: "Bermuka Masam", juz: 30, page: 585 },
      { number: 81, arabic: "ٱلتَّكْوِير", transliteration: "At-Takwīr", english: "The Overthrowing", indonesian: "Menggulung", juz: 30, page: 586 },
      { number: 82, arabic: "ٱلْإِنْفِطَار", transliteration: "Al-Infiṭār", english: "The Cleaving", indonesian: "Terbelah", juz: 30, page: 587 },
      { number: 83, arabic: "ٱلْمُطَفِّفِينَ", transliteration: "Al-Muṭaffifīn", english: "Defrauding", indonesian: "Orang Curang", juz: 30, page: 587 },
      { number: 84, arabic: "ٱلْإِنْشِقَاق", transliteration: "Al-Inshiqāq", english: "The Splitting Open", indonesian: "Terbelah", juz: 30, page: 589 },
      { number: 85, arabic: "ٱلْبُرُوج", transliteration: "Al-Burūj", english: "The Constellations", indonesian: "Gugusan Bintang", juz: 30, page: 590 },
      { number: 86, arabic: "ٱلطَّارِق", transliteration: "Aṭ-Ṭāriq", english: "The Night-Comer", indonesian: "Yang Datang di Malam Hari", juz: 30, page: 591 },
      { number: 87, arabic: "ٱلْأَعْلَى", transliteration: "Al-Aʿlā", english: "The Most High", indonesian: "Yang Maha Tinggi", juz: 30, page: 591 },
      { number: 88, arabic: "ٱلْغَاشِيَة", transliteration: "Al-Ghāshiyah", english: "The Overwhelming", indonesian: "Hari Kiamat", juz: 30, page: 592 },
      { number: 89, arabic: "ٱلْفَجْر", transliteration: "Al-Fajr", english: "The Dawn", indonesian: "Fajar", juz: 30, page: 593 },
      { number: 90, arabic: "ٱلْبَلَد", transliteration: "Al-Balad", english: "The City", indonesian: "Negeri", juz: 30, page: 594 },
      { number: 91, arabic: "ٱلشَّمْس", transliteration: "Ash-Shams", english: "The Sun", indonesian: "Matahari", juz: 30, page: 595 },
      { number: 92, arabic: "ٱللَّيْل", transliteration: "Al-Layl", english: "The Night", indonesian: "Malam", juz: 30, page: 595 },
      { number: 93, arabic: "ٱلضُّحَىٰ", transliteration: "Aḍ-Ḍuḥā", english: "The Morning Brightness", indonesian: "Waktu Dhuha", juz: 30, page: 596 },
      { number: 94, arabic: "ٱلشَّرْح", transliteration: "Ash-Sharḥ", english: "The Relief", indonesian: "Kelapangan", juz: 30, page: 596 },
      { number: 95, arabic: "ٱلتِّين", transliteration: "At-Tīn", english: "The Fig", indonesian: "Buah Tin", juz: 30, page: 597 },
      { number: 96, arabic: "ٱلْعَلَق", transliteration: "Al-ʿAlaq", english: "The Clot", indonesian: "Segumpal Darah", juz: 30, page: 597 },
      { number: 97, arabic: "ٱلْقَدْر", transliteration: "Al-Qadr", english: "The Decree", indonesian: "Kemuliaan", juz: 30, page: 598 },
      { number: 98, arabic: "ٱلْبَيِّنَة", transliteration: "Al-Bayyinah", english: "The Clear Proof", indonesian: "Bukti Nyata", juz: 30, page: 598 },
      { number: 99, arabic: "ٱلزَّلْزَلَة", transliteration: "Az-Zalzalah", english: "The Earthquake", indonesian: "Guncangan", juz: 30, page: 599 },
      { number: 100, arabic: "ٱلْعَادِيَات", transliteration: "Al-ʿĀdiyāt", english: "The Chargers", indonesian: "Kuda Perang", juz: 30, page: 599 },
      { number: 101, arabic: "ٱلْقَارِعَة", transliteration: "Al-Qāriʿah", english: "The Striking Calamity", indonesian: "Hari Kiamat", juz: 30, page: 600 },
      { number: 102, arabic: "ٱلتَّكَاثُر", transliteration: "At-Takāthur", english: "Competition", indonesian: "Bermegah-Megahan", juz: 30, page: 600 },
      { number: 103, arabic: "ٱلْعَصْر", transliteration: "Al-ʿAṣr", english: "The Declining Day", indonesian: "Masa", juz: 30, page: 601 },
      { number: 104, arabic: "ٱلْهُمَزَة", transliteration: "Al-Humazah", english: "The Slanderer", indonesian: "Pengumpat", juz: 30, page: 601 },
      { number: 105, arabic: "ٱلْفِيل", transliteration: "Al-Fīl", english: "The Elephant", indonesian: "Gajah", juz: 30, page: 602 },
      { number: 106, arabic: "قُرَيْش", transliteration: "Quraysh", english: "Quraysh", indonesian: "Quraisy", juz: 30, page: 602 },
      { number: 107, arabic: "ٱلْمَاعُون", transliteration: "Al-Māʿūn", english: "Small Kindness", indonesian: "Barang yang Berguna", juz: 30, page: 602 },
      { number: 108, arabic: "ٱلْكَوْثَر", transliteration: "Al-Kawthar", english: "Abundance", indonesian: "Nikmat yang Banyak", juz: 30, page: 603 },
      { number: 109, arabic: "ٱلْكَافِرُونَ", transliteration: "Al-Kāfirūn", english: "The Disbelievers", indonesian: "Orang-Orang Kafir", juz: 30, page: 603 },
      { number: 110, arabic: "ٱلنَّصْر", transliteration: "An-Naṣr", english: "The Divine Support", indonesian: "Pertolongan", juz: 30, page: 603 },
      { number: 111, arabic: "ٱلْمَسَد", transliteration: "Al-Masad", english: "Palm Fiber", indonesian: "Api yang Bergejolak", juz: 30, page: 604 },
      { number: 112, arabic: "ٱلْإِخْلَاص", transliteration: "Al-Ikhlāṣ", english: "Sincerity", indonesian: "Ikhlas", juz: 30, page: 604 },
      { number: 113, arabic: "ٱلْفَلَق", transliteration: "Al-Falaq", english: "The Daybreak", indonesian: "Subuh", juz: 30, page: 604 },
      { number: 114, arabic: "ٱلنَّاس", transliteration: "An-Nās", english: "Mankind", indonesian: "Manusia", juz: 30, page: 604 }
    ];

    function getAudioUrl(surahNumber) {
      const paddedNumber = surahNumber.toString().padStart(3, '0');
      return `https://download.quranicaudio.com/quran/mishaari_raashid_al_3afaasee/${paddedNumber}.mp3`;
    }

    function playSurahAudio(surahNumber, surahName, boxElement) {
      stopAudio();
      currentPlayingBox = boxElement;
      currentSurahNumber = surahNumber;
      boxElement.classList.add('loading-audio');
      const indicator = boxElement.querySelector('.audio-indicator');
      if (indicator) indicator.classList.add('loading');
      document.getElementById('currentSurahName').textContent = `${surahNumber}. ${surahName}`;
      document.getElementById('audioControls').classList.add('show');
      document.getElementById('playPauseBtn').textContent = '⏸';
      const audioUrl = getAudioUrl(surahNumber);
      audioPlayer.src = audioUrl;
      audioPlayer.play().catch(error => {
        console.error('Error playing audio:', error);
        boxElement.classList.remove('loading-audio');
        if (indicator) indicator.classList.remove('loading');
        alert('Unable to play audio. Please check your internet connection or try another surah.');
      });
    }

    function stopAudio() {
      audioPlayer.pause();
      audioPlayer.currentTime = 0;
      document.querySelectorAll('.name-box.playing-audio, .name-box.loading-audio').forEach(box => {
        box.classList.remove('playing-audio', 'loading-audio');
        const indicator = box.querySelector('.audio-indicator');
        if (indicator) indicator.classList.remove('playing', 'loading');
      });
      currentPlayingBox = null;
      currentSurahNumber = null;
    }

    function togglePlayPause() {
      if (audioPlayer.paused) {
        audioPlayer.play();
        document.getElementById('playPauseBtn').textContent = '⏸';
      } else {
        audioPlayer.pause();
        document.getElementById('playPauseBtn').textContent = '▶';
      }
    }

    function navigateToTafsir(surahNumber) {
      // Store the last viewed surah before navigating
      localStorage.setItem('lastViewedSurah', surahNumber.toString());
      localStorage.setItem('lastViewedSurahTime', Date.now().toString());
      stopAudio();
      const paddedNumber = surahNumber.toString().padStart(3, '0');
      window.location.href = `${paddedNumber}.html`;
    }

    function handleBoxClick(boxElement, surahNumber, surahName, isDoubleClick = false) {
      if (isDoubleClick) {
        playSurahAudio(surahNumber, surahName, boxElement);
      } else {
        navigateToTafsir(surahNumber);
      }
    }

    function highlightAndScrollToLastSurah() {
      const lastSurahNumber = localStorage.getItem('lastViewedSurah');
      const lastSurahTime = localStorage.getItem('lastViewedSurahTime');
      
      if (!lastSurahNumber) return;
      
      // Clear the last viewed surah after 30 minutes (1800000 ms) instead of 5 minutes
      if (lastSurahTime && (Date.now() - parseInt(lastSurahTime) > 1800000)) {
        localStorage.removeItem('lastViewedSurah');
        localStorage.removeItem('lastViewedSurahTime');
        return;
      }
      
      const surahNumber = parseInt(lastSurahNumber);
      
      // Find the active content (English or Indonesian)
      const englishContent = document.getElementById('english-content');
      const indonesianContent = document.getElementById('indonesian-content');
      let activeContainer = null;
      
      if (!englishContent.classList.contains('hidden')) {
        activeContainer = document.getElementById('englishNamesContainer');
      } else if (!indonesianContent.classList.contains('hidden')) {
        activeContainer = document.getElementById('indonesianNamesContainer');
      }
      
      if (!activeContainer) return;
      
      const targetBox = activeContainer.querySelector(`.name-box[data-number="${surahNumber}"]`);
      
      if (targetBox) {
        // Remove any existing highlights first
        document.querySelectorAll('.name-box.recently-viewed').forEach(box => {
          box.classList.remove('recently-viewed');
        });
        
        // Highlight the box
        targetBox.classList.add('recently-viewed');
        
        // Remove highlight after 10 seconds
        setTimeout(() => {
          targetBox.classList.remove('recently-viewed');
        }, 10000);
        
        // Scroll to the box with proper offset calculation
        setTimeout(() => {
          const headerHeight = document.querySelector('.search-container').offsetHeight + 
                              document.querySelector('.instruction').offsetHeight + 20;
          const boxRect = targetBox.getBoundingClientRect();
          const absoluteTop = window.pageYOffset + boxRect.top;
          const scrollPosition = absoluteTop - headerHeight;
          
          window.scrollTo({
            top: scrollPosition,
            behavior: 'smooth'
          });
          
          // Add a subtle focus effect
          targetBox.style.transform = 'scale(1.03)';
          setTimeout(() => {
            targetBox.style.transform = '';
          }, 500);
        }, 300); // Small delay to ensure DOM is ready
      }
    }

    audioPlayer.addEventListener('play', function() {
      if (currentPlayingBox) {
        currentPlayingBox.classList.remove('loading-audio');
        currentPlayingBox.classList.add('playing-audio');
        const indicator = currentPlayingBox.querySelector('.audio-indicator');
        if (indicator) {
          indicator.classList.remove('loading');
          indicator.classList.add('playing');
        }
      }
    });

    audioPlayer.addEventListener('pause', function() {
      if (currentPlayingBox) {
        const indicator = currentPlayingBox.querySelector('.audio-indicator');
        if (indicator) indicator.classList.remove('playing');
      }
    });

    audioPlayer.addEventListener('ended', function() {
      stopAudio();
      document.getElementById('audioControls').classList.remove('show');
    });

    function getPreferredLanguage() {
      return localStorage.getItem('language') || 'indonesian';
    }

    function setInitialLanguage() {
      const language = getPreferredLanguage();
      const englishContent = document.getElementById('english-content');
      const indonesianContent = document.getElementById('indonesian-content');
      const toggleButton = document.getElementById('languageToggle');
      if (language === 'english') {
        englishContent.classList.remove('hidden');
        indonesianContent.classList.add('hidden');
        toggleButton.textContent = 'Switch to Indonesian';
      } else {
        englishContent.classList.add('hidden');
        indonesianContent.classList.remove('hidden');
        toggleButton.textContent = 'Switch to English';
      }
    }

    function formatJuz(juzData) {
      if (Array.isArray(juzData)) {
        return juzData.length === 2 ? `${juzData[0]}-${juzData[1]}` : juzData.join(', ');
      }
      return `${juzData}`;
    }

    function populateNames() {
      const englishContainer = document.getElementById('englishNamesContainer');
      const indonesianContainer = document.getElementById('indonesianNamesContainer');
      englishContainer.innerHTML = '';
      indonesianContainer.innerHTML = '';
      namesData.forEach(name => {
        const juzText = formatJuz(name.juz);
        // English box
        const englishBox = document.createElement('div');
        englishBox.className = 'name-box';
        englishBox.setAttribute('data-number', name.number);
        englishBox.setAttribute('data-arabic', name.arabic);
        englishBox.setAttribute('data-transliteration', name.transliteration.toLowerCase());
        englishBox.setAttribute('data-english', name.english.toLowerCase());
        englishBox.setAttribute('data-juz', Array.isArray(name.juz) ? name.juz.join(',') : name.juz.toString());
        englishBox.setAttribute('data-page', name.page.toString());
        englishBox.innerHTML = `
          <div style="width: 100%;">
            <span class="arabic">${name.arabic}</span>
            <span class="transliteration">${name.number}. ${name.transliteration}</span>
            <span class="translation">${name.english}</span>
            <span class="meta-info">Juz ${juzText} • Page ${name.page}</span>
            <div class="audio-indicator"></div>
          </div>`;
        let clickCount = 0;
        let clickTimer;
        englishBox.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          clickCount++;
          if (clickCount === 1) {
            clickTimer = setTimeout(() => {
              handleBoxClick(this, name.number, name.transliteration, false);
              clickCount = 0;
            }, 250);
          } else {
            clearTimeout(clickTimer);
            handleBoxClick(this, name.number, name.transliteration, true);
            clickCount = 0;
          }
        });
        englishContainer.appendChild(englishBox);
        // Indonesian box
        const indonesianBox = document.createElement('div');
        indonesianBox.className = 'name-box';
        indonesianBox.setAttribute('data-number', name.number);
        indonesianBox.setAttribute('data-arabic', name.arabic);
        indonesianBox.setAttribute('data-transliteration', name.transliteration.toLowerCase());
        indonesianBox.setAttribute('data-indonesian', name.indonesian.toLowerCase());
        indonesianBox.setAttribute('data-juz', Array.isArray(name.juz) ? name.juz.join(',') : name.juz.toString());
        indonesianBox.setAttribute('data-page', name.page.toString());
        indonesianBox.innerHTML = `
          <div style="width: 100%;">
            <span class="arabic">${name.arabic}</span>
            <span class="transliteration">${name.number}. ${name.transliteration}</span>
            <span class="translation">${name.indonesian}</span>
            <span class="meta-info">Juz ${juzText} • Halaman ${name.page}</span>
            <div class="audio-indicator"></div>
          </div>`;
        let clickCountIndo = 0;
        let clickTimerIndo;
        indonesianBox.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          clickCountIndo++;
          if (clickCountIndo === 1) {
            clickTimerIndo = setTimeout(() => {
              handleBoxClick(this, name.number, name.transliteration, false);
              clickCountIndo = 0;
            }, 250);
          } else {
            clearTimeout(clickTimerIndo);
            handleBoxClick(this, name.number, name.transliteration, true);
            clickCountIndo = 0;
          }
        });
        indonesianContainer.appendChild(indonesianBox);
      });
    }

    function searchNames() {
      const input = document.getElementById("searchInput").value.trim().toLowerCase();
      const boxes = document.querySelectorAll("#english-content .name-box");
      let hasResults = false;
      if (input === '') {
        boxes.forEach(box => {
          box.style.display = "flex";
        });
        document.getElementById('englishNamesContainer').querySelector('.no-results')?.remove();
        return;
      }
      for (let box of boxes) {
        const number = box.getAttribute('data-number');
        const arabic = box.getAttribute('data-arabic');
        const transliteration = box.getAttribute('data-transliteration');
        const english = box.getAttribute('data-english');
        const juz = box.getAttribute('data-juz');
        const page = box.getAttribute('data-page');
        const isMatch = 
          number === input || 
          number.padStart(3, '0') === input.padStart(3, '0') ||
          arabic.includes(input) ||
          transliteration.includes(input) ||
          english.includes(input) ||
          juz.includes(input) ||
          page === input;
        if (isMatch) {
          box.style.display = "flex";
          hasResults = true;
        } else {
          box.style.display = "none";
        }
      }
      const container = document.getElementById('englishNamesContainer');
      const existingMessage = container.querySelector('.no-results');
      if (!hasResults) {
        if (!existingMessage) {
          const noResults = document.createElement('div');
          noResults.className = 'no-results';
          noResults.textContent = 'No matching names found. Try searching by number (1-114), Arabic, transliteration, English meaning, juz, or page.';
          container.appendChild(noResults);
        }
      } else if (existingMessage) {
        existingMessage.remove();
      }
    }

    function searchNamesIndo() {
      const input = document.getElementById("searchInputIndo").value.trim().toLowerCase();
      const boxes = document.querySelectorAll("#indonesian-content .name-box");
      let hasResults = false;
      if (input === '') {
        boxes.forEach(box => {
          box.style.display = "flex";
        });
        document.getElementById('indonesianNamesContainer').querySelector('.no-results')?.remove();
        return;
      }
      for (let box of boxes) {
        const number = box.getAttribute('data-number');
        const arabic = box.getAttribute('data-arabic');
        const transliteration = box.getAttribute('data-transliteration');
        const indonesian = box.getAttribute('data-indonesian');
        const juz = box.getAttribute('data-juz');
        const page = box.getAttribute('data-page');
        const isMatch = 
          number === input || 
          number.padStart(3, '0') === input.padStart(3, '0') ||
          arabic.includes(input) ||
          transliteration.includes(input) ||
          indonesian.includes(input) ||
          juz.includes(input) ||
          page === input;
        if (isMatch) {
          box.style.display = "flex";
          hasResults = true;
        } else {
          box.style.display = "none";
        }
      }
      const container = document.getElementById('indonesianNamesContainer');
      const existingMessage = container.querySelector('.no-results');
      if (!hasResults) {
        if (!existingMessage) {
          const noResults = document.createElement('div');
          noResults.className = 'no-results';
          noResults.textContent = 'Tidak ada nama yang cocok. Coba cari berdasarkan nomor (1-114), Arab, transliterasi, arti Indonesia, juz, atau halaman.';
          container.appendChild(noResults);
        }
      } else if (existingMessage) {
        existingMessage.remove();
      }
    }

    function toggleLanguage() {
      const englishContent = document.getElementById('english-content');
      const indonesianContent = document.getElementById('indonesian-content');
      const toggleButton = document.getElementById('languageToggle');
      stopAudio();
      document.getElementById('audioControls').classList.remove('show');
      if (englishContent.classList.contains('hidden')) {
        englishContent.classList.remove('hidden');
        indonesianContent.classList.add('hidden');
        toggleButton.textContent = 'Switch to Indonesian';
        localStorage.setItem('language', 'english');
        // Highlight and scroll to last surah in the new language
        setTimeout(highlightAndScrollToLastSurah, 100);
      } else {
        englishContent.classList.add('hidden');
        indonesianContent.classList.remove('hidden');
        toggleButton.textContent = 'Switch to English';
        localStorage.setItem('language', 'indonesian');
        // Highlight and scroll to last surah in the new language
        setTimeout(highlightAndScrollToLastSurah, 100);
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
      setInitialLanguage();
      populateNames();
      document.getElementById('languageToggle').addEventListener('click', toggleLanguage);
      document.getElementById('playPauseBtn').addEventListener('click', togglePlayPause);
      document.getElementById('stopBtn').addEventListener('click', stopAudio);
      
      // Highlight and scroll to last viewed surah after page loads
      setTimeout(highlightAndScrollToLastSurah, 300);
    });
  </script>
</body>
</html>

